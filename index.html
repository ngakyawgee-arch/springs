<!DOCTYPE html>
<html lang="my">
<head>
    <meta charset="UTF-8">
    <title>á€–á€­á€¯á€¸á€…á€±á€¬á€„á€·á€ºá€á€±á€¬á€„á€ºá€™á€®á€¸á€¡á€­á€™á€º (LFM)</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
    
    <meta name="theme-color" content="#1e8f4d">
    <meta name="mobile-web-app-capable" content="yes">
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/png" href="icon-192.png">

    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
    
    <script src="https://cdn.sheetjs.com/xlsx-latest/package/dist/xlsx.full.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

    <style>
        :root {
            --primary: #1e8f4d; --primary-dark: #167a3f; --dark: #0d0d0d;
            --card: #1a1a1a; --danger: #dc3545; --success: #28a745;
        }
        body { background: var(--dark); color: white; font-family: sans-serif; margin: 0; padding-bottom: 80px; }
        .hide { display: none !important; }
        .card { background: var(--card); padding: 20px; border-radius: 12px; margin: 15px; border: 1px solid #333; }
        input, select, textarea { width: 100%; padding: 12px; margin: 8px 0; border-radius: 8px; border: 1px solid #444; background: #222; color: white; }
        button { width: 100%; padding: 15px; border-radius: 8px; border: none; font-weight: bold; cursor: pointer; transition: 0.3s; }
        .btn-primary { background: var(--primary); color: white; }
        .bottom-nav { position: fixed; bottom: 0; width: 100%; background: #111; display: flex; padding: 10px; border-top: 1px solid #333; }
        .nav-btn { flex: 1; background: none; color: #888; text-align: center; font-size: 12px; }
        .nav-btn.active { color: var(--primary); }
    </style>
</head>
<body>

    <div id="app">
        <div id="loginPage" class="page">
            <div class="card">
                <h2 style="text-align: center; color: var(--primary);">á€–á€­á€¯á€¸á€…á€±á€¬á€„á€·á€ºá€á€±á€¬á€„á€ºá€™á€®á€¸á€¡á€­á€™á€º</h2>
                <input type="email" id="loginEmail" placeholder="á€¡á€®á€¸á€™á€±á€¸á€œá€º">
                <input type="password" id="loginPassword" placeholder="á€…á€€á€¬á€¸á€á€¾á€€á€º">
                <button onclick="login()" class="btn-primary">á€á€„á€ºá€™á€Šá€º</button>
            </div>
        </div>

        <div id="mainApp" class="page hide">
            <div id="contentArea"></div>
        </div>
    </div>

    <div id="bottomNav" class="bottom-nav hide">
        <button class="nav-btn active" onclick="showTab('home')">ğŸ <br>á€•á€„á€ºá€™</button>
        <button class="nav-btn" onclick="showTab('donate')">â•<br>á€¡á€œá€¾á€°</button>
        <button class="nav-btn" onclick="showTab('list')">ğŸ“‹<br>á€…á€¬á€›á€„á€ºá€¸</button>
        <button class="nav-btn" onclick="logout()">ğŸšª<br>á€‘á€½á€€á€ºá€›á€”á€º</button>
    </div>

    <script>
        // Firebase Configuration (á€á€á€­á€•á€¼á€¯á€›á€”á€º: á€œá€€á€ºá€á€½á€±á€·á€á€½á€„á€º API Keys á€™á€»á€¬á€¸á€€á€­á€¯ á€•á€­á€¯á€™á€­á€¯á€œá€¯á€¶á€á€¼á€¯á€¶á€…á€½á€¬ á€á€­á€™á€ºá€¸á€†á€Šá€ºá€¸á€•á€«)
        const firebaseConfig = {
            apiKey: "AIzaSyBojMFTkLXmaFGqwq9tLKpXp-wXKqkN_no",
            authDomain: "lamp-88a25.firebaseapp.com",
            databaseURL: "https://lamp-88a25-default-rtdb.asia-southeast1.firebasedatabase.app",
            projectId: "lamp-88a25",
            storageBucket: "lamp-88a25.appspot.com"
        };
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.database();

        let currentUser = null;

        // Login Function with Security
        async function login() {
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            
            try {
                const userCredential = await auth.signInWithEmailAndPassword(email, password);
                currentUser = userCredential.user;
                document.getElementById('loginPage').classList.add('hide');
                document.getElementById('mainApp').classList.remove('hide');
                document.getElementById('bottomNav').classList.remove('hide');
                showNotification('á€á€„á€ºá€›á€±á€¬á€€á€ºá€™á€¾á€¯ á€¡á€±á€¬á€„á€ºá€™á€¼á€„á€ºá€•á€«á€á€Šá€º', 'success');
                showTab('home');
            } catch (error) {
                showNotification('á€¡á€®á€¸á€™á€±á€¸á€œá€º á€á€­á€¯á€·á€™á€Ÿá€¯á€á€º á€…á€€á€¬á€¸á€á€¾á€€á€º á€™á€¾á€¬á€¸á€šá€½á€„á€ºá€¸á€”á€±á€•á€«á€á€Šá€º', 'error');
            }
        }

        // Notification System
        function showNotification(msg, type) {
            const div = document.createElement('div');
            div.style.cssText = `position:fixed; top:20px; right:20px; padding:15px; border-radius:8px; z-index:999; color:white; background:${type==='success'?'var(--success)':'var(--danger)'}`;
            div.innerText = msg;
            document.body.appendChild(div);
            setTimeout(() => div.remove(), 3000);
            if ('vibrate' in navigator) navigator.vibrate(50);
        }

        // Offline Data Sync
        window.addEventListener('online', () => {
            showNotification('á€¡á€„á€ºá€á€¬á€”á€€á€º á€•á€¼á€”á€ºá€›á€•á€«á€•á€¼á€®á‹ á€’á€±á€á€¬á€™á€»á€¬á€¸ Sync á€œá€¯á€•á€ºá€”á€±á€á€Šá€º...', 'success');
            // Sync Logic Here
        });

        function logout() {
            auth.signOut().then(() => location.reload());
        }

        function showTab(tab) {
            const content = document.getElementById('contentArea');
            if(tab === 'home') {
                content.innerHTML = '<div class="card"><h3>á€…á€¯á€…á€¯á€•á€±á€«á€„á€ºá€¸á€…á€¬á€›á€„á€ºá€¸</h3><p>á€¡á€œá€¾á€°á€„á€½á€±: 0 á€˜á€á€º</p></div>';
            } else if(tab === 'donate') {
                content.innerHTML = '<div class="card"><h3>á€¡á€œá€¾á€°á€¡á€á€…á€ºá€‘á€Šá€·á€ºá€›á€”á€º</h3><input placeholder="á€¡á€™á€Šá€º"><input type="number" placeholder="á€•á€™á€¬á€"><button class="btn-primary">á€á€­á€™á€ºá€¸á€™á€Šá€º</button></div>';
            }
        }
    </script>
</body>
</html>
