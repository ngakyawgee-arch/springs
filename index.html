<!DOCTYPE html>
<html lang="my">
<head>
    <meta charset="UTF-8">
    <title>LFM - Weekly Manager Pro</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
    
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

    <style>
        :root { 
            --primary: #27ae60; 
            --danger: #e74c3c;
            --glass: rgba(255, 255, 255, 0.12);
            --glass-dark: rgba(0, 0, 0, 0.7);
            --text: #ffffff;
        }

        body { 
            background: url('data:image/jpeg;base64,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 (Truncated for brevity) ') no-repeat center center fixed; 
            background-size: cover; 
            color: var(--text); 
            font-family: sans-serif; 
            margin: 0; 
            padding-bottom: 80px;
        }

        body::before {
            content: ""; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.45); z-index: -1;
        }

        .hide { display: none !important; }
        .page { padding: 15px; max-width: 600px; margin: auto; }
        
        .card { 
            background: var(--glass-dark); 
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            padding: 20px; border-radius: 20px; margin-bottom: 15px; 
            border: 1px solid rgba(255,255,255,0.15);
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.4);
        }

        input, select, textarea { 
            width: 100%; padding: 14px; margin: 10px 0; border-radius: 12px; 
            border: 1px solid rgba(255,255,255,0.2); background: rgba(255,255,255,0.1); color: white; box-sizing: border-box; 
            font-size: 16px;
        }
        input::placeholder { color: #ccc; }

        .btn { width: 100%; padding: 15px; border-radius: 12px; border: none; font-weight: bold; cursor: pointer; margin-top: 10px; font-size: 16px; transition: 0.3s; }
        .btn-save { background: var(--primary); color: white; }
        .btn-expense { background: #e67e22; color: white; }
        .btn:active { transform: scale(0.98); }
        
        /* Navigation */
        .bottom-nav { position: fixed; bottom: 0; width: 100%; background: rgba(0,0,0,0.85); display: flex; border-top: 1px solid #333; z-index: 100; backdrop-filter: blur(10px); }
        .nav-item { flex: 1; padding: 15px; text-align: center; cursor: pointer; color: #bbb; font-size: 11px; }
        .nav-item.active { color: var(--primary); font-weight: bold; }

        /* Budget Balance */
        .balance-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 15px; }
        .bal-card { padding: 15px; border-radius: 15px; text-align: center; background: rgba(255,255,255,0.08); border: 1px solid rgba(255,255,255,0.1); }
        .bal-label { font-size: 12px; color: #ddd; margin-bottom: 5px; display: block; }

        /* PNG Export Template (Landscape A4) */
        #exportExpenseArea {
            width: 1123px; height: 794px;
            padding: 60px; background: #ffffff; color: #1a1a1a; 
            position: fixed; left: -3000px;
            box-sizing: border-box; display: flex; flex-direction: column;
        }
        .exp-header { text-align: center; border-bottom: 3px solid var(--primary); padding-bottom: 20px; margin-bottom: 40px; }
        .exp-logo { width: 130px; height: 130px; border-radius: 50%; object-fit: cover; border: 4px solid var(--primary); }
        .exp-title-1 { font-size: 50px; color: var(--primary); margin: 15px 0 5px 0; font-weight: bold; }
        .exp-title-2 { font-size: 32px; color: #444; margin: 0; }
        
        .exp-body { flex-grow: 1; margin-top: 20px; }
        .exp-table { width: 80%; margin: auto; font-size: 26px; border-collapse: collapse; }
        .exp-table td { padding: 15px; border-bottom: 1px solid #eee; }
        .exp-table td:first-child { font-weight: bold; color: #666; width: 300px; }

        .exp-footer { margin-top: 50px; display: flex; justify-content: space-between; align-items: flex-end; }
        .victory-text { color: #e74c3c; font-size: 40px; font-weight: bold; font-style: italic; }
        .signature-box { text-align: center; border-top: 2px solid #333; padding-top: 10px; width: 300px; font-size: 22px; }
    </style>
</head>
<body>

    <div id="loginPage" class="page">
        <div style="text-align: center; margin-top: 60px;">
            <img src="YOUR_LOGO_URL_HERE" style="width:110px; height:110px; border-radius:50%; border: 3px solid var(--primary); object-fit: cover;">
            <h1 style="color: white; text-shadow: 0 2px 10px rgba(0,0,0,0.5); margin-top: 15px;">LFM Pro</h1>
        </div>
        <div class="card" style="margin-top: 30px;">
            <input type="email" id="email" placeholder="·Ä°·ÄÆ·Ä∏·Äô·Ä±·Ä∏·Äú·Ä∫">
            <input type="password" id="password" placeholder="·Äú·Äª·Äæ·Ä≠·ÄØ·Ä∑·Äù·Äæ·ÄÄ·Ä∫·Äî·Ä∂·Äï·Ä´·Äê·Ä∫">
            <button class="btn btn-save" onclick="login()">LOGIN</button>
        </div>
    </div>

    <div id="mainApp" class="hide">
        <div class="page" style="padding-bottom:0;">
            <div class="balance-grid">
                <div class="bal-card">
                    <span class="bal-label">·ÄÖ·ÄØ·ÄÖ·ÄØ·Äï·Ä±·Ä´·ÄÑ·Ä∫·Ä∏·Ä°·Äú·Äæ·Ä∞·ÄÑ·ÄΩ·Ä±</span>
                    <div id="globalIncome" style="color: #2ecc71; font-size: 18px; font-weight: bold;">0</div>
                </div>
                <div class="bal-card">
                    <span class="bal-label">·ÄÖ·ÄØ·ÄÖ·ÄØ·Äï·Ä±·Ä´·ÄÑ·Ä∫·Ä∏·Ä°·Äû·ÄØ·Ä∂·Ä∏·ÄÖ·Äõ·Ä≠·Äê·Ä∫</span>
                    <div id="globalExpense" style="color: #ff7675; font-size: 18px; font-weight: bold;">0</div>
                </div>
            </div>
            <div class="card" style="text-align: center; padding: 15px; background: rgba(30, 143, 77, 0.2);">
                <span class="bal-label">·Äú·ÄÄ·Ä∫·ÄÄ·Äª·Äî·Ä∫·ÄÑ·ÄΩ·Ä± (Balance)</span>
                <div id="netBalance" style="font-size: 26px; font-weight: bold; color: white;">0 ·Äò·Äê·Ä∫</div>
            </div>
        </div>

        <div id="incomeTab" class="page">
            <h3 style="margin-left: 10px;">üí∞ ·Ä°·Äú·Äæ·Ä∞·Äõ·Äæ·ÄÑ·Ä∫·ÄÖ·Ä¨·Äõ·ÄÑ·Ä∫·Ä∏</h3>
            <div class="card">
                <input type="text" id="donorName" placeholder="·Ä°·Äú·Äæ·Ä∞·Äõ·Äæ·ÄÑ·Ä∫·Ä°·Äô·Ää·Ä∫">
                <input type="number" id="incomeAmount" placeholder="·Äï·Äô·Ä¨·Äè (·Äò·Äê·Ä∫)">
                <select id="incomeWeek"></select>
                <input type="date" id="incomeDate">
                <button class="btn btn-save" onclick="saveIncome()">·Äû·Ä≠·Äô·Ä∫·Ä∏·ÄÜ·Ää·Ä∫·Ä∏·Äô·Ää·Ä∫</button>
            </div>
        </div>

        <div id="expenseTab" class="page hide">
            <h3 style="margin-left: 10px;">üöö ·Äë·Ä±·Ä¨·ÄÄ·Ä∫·Äï·Ä≠·ÄØ·Ä∑·Ä°·Äú·Äæ·Ä∞</h3>
            <div class="card">
                <input type="text" id="expOrg" placeholder="·Ä°·Äñ·ÄΩ·Ä≤·Ä∑·Ä°·Äô·Ää·Ä∫">
                <input type="text" id="expActivity" placeholder="·Äú·Äæ·ÄØ·Äï·Ä∫·Äõ·Äæ·Ä¨·Ä∏·Äô·Äæ·ÄØ">
                <input type="text" id="expRegion" placeholder="·Äí·Ä±·Äû">
                <input type="number" id="expAmount" placeholder="·Äï·Äô·Ä¨·Äè (·Äò·Äê·Ä∫)">
                <input type="date" id="expDate">
                <textarea id="expNote" rows="3" placeholder="·Äô·Äæ·Äê·Ä∫·ÄÅ·Äª·ÄÄ·Ä∫..."></textarea>
                <button class="btn btn-expense" onclick="saveExpense()">·Äô·Äæ·Äê·Ä∫·Äê·Äô·Ä∫·Ä∏·Äê·ÄÑ·Ä∫·Äô·Ää·Ä∫</button>
            </div>
        </div>

        <div id="historyTab" class="page hide">
            <h3 style="margin-left: 10px;">üìú ·Äô·Äæ·Äê·Ä∫·Äê·Äô·Ä∫·Ä∏·Äô·Äª·Ä¨·Ä∏</h3>
            <div id="expenseHistoryList"></div>
        </div>
    </div>

    <div id="exportExpenseArea">
        <div class="exp-header">
            <img src="YOUR_LOGO_URL_HERE" class="exp-logo">
            <div class="exp-title-1">·Äñ·Ä≠·ÄØ·Ä∏·ÄÖ·Ä±·Ä¨·ÄÑ·Ä∑·Ä∫·Äê·Ä±·Ä¨·ÄÑ·Ä∫·Äô·ÄÆ·Ä∏·Ä°·Ä≠·Äô·Ä∫</div>
            <div class="exp-title-2">·Äë·Ä±·Ä¨·ÄÄ·Ä∫·Äï·Ä≠·ÄØ·Ä∑·Äú·Äæ·Ä∞·Äí·Ä´·Äî·Ä∫·Ä∏·ÄÅ·Äº·ÄÑ·Ä∫·Ä∏·Äô·Äæ·Äê·Ä∫·Äê·Äô·Ä∫·Ä∏</div>
        </div>
        <div class="exp-body">
            <table class="exp-table">
                <tr><td>·Ä°·Äñ·ÄΩ·Ä≤·Ä∑·Ä°·Äô·Ää·Ä∫</td><td>: <span id="outOrg"></span></td></tr>
                <tr><td>·Äú·Äæ·ÄØ·Äï·Ä∫·Äõ·Äæ·Ä¨·Ä∏·Äô·Äæ·ÄØ</td><td>: <span id="outAct"></span></td></tr>
                <tr><td>·Äí·Ä±·Äû</td><td>: <span id="outReg"></span></td></tr>
                <tr><td>·Äõ·ÄÄ·Ä∫·ÄÖ·ÄΩ·Ä≤</td><td>: <span id="outDate"></span></td></tr>
                <tr><td>·Äú·Äæ·Ä∞·Äí·Ä´·Äî·Ä∫·Ä∏·Äô·Äæ·ÄØ·Äï·Äô·Ä¨·Äè</td><td>: <span id="outAmt" style="color:#27ae60; font-weight:bold;"></span> ·Äò·Äê·Ä∫</td></tr>
            </table>
        </div>
        <div class="exp-footer">
            <div style="width: 300px;"></div> <div class="victory-text">·Ä°·Äõ·Ä±·Ä∏·Äê·Ä±·Ä¨·Ä∫·Äï·ÄØ·Ä∂ ·Ä°·Ä±·Ä¨·ÄÑ·Ä∫·Äõ·Äô·Ää·Ä∫!</div>
            <div class="signature-box">
                ·Äê·Ä¨·Äù·Äî·Ä∫·ÄÅ·Ä∂<br>(·Äñ·Ä≠·ÄØ·Ä∏·ÄÖ·Ä±·Ä¨·ÄÑ·Ä∑·Ä∫·Äê·Ä±·Ä¨·ÄÑ·Ä∫·Äô·ÄÆ·Ä∏·Ä°·Ä≠·Äô·Ä∫)
            </div>
        </div>
    </div>

    <nav id="bottomNav" class="bottom-nav hide">
        <div class="nav-item active" onclick="switchTab('incomeTab', this)">üí∞<br>·Ä°·Äú·Äæ·Ä∞·Äõ·Äæ·ÄÑ·Ä∫</div>
        <div class="nav-item" onclick="switchTab('expenseTab', this)">üöö<br>·Äë·Ä±·Ä¨·ÄÄ·Ä∫·Äï·Ä≠·ÄØ·Ä∑</div>
        <div class="nav-item" onclick="switchTab('historyTab', this)">üìú<br>·Äô·Äæ·Äê·Ä∫·Äê·Äô·Ä∫·Ä∏</div>
        <div class="nav-item" onclick="logout()">üö™<br>·Äë·ÄΩ·ÄÄ·Ä∫·Äõ·Äî·Ä∫</div>
    </nav>

    <script>
        // Firebase Config (Keep your existing config)
        const firebaseConfig = {
            apiKey: "AIzaSyBojMFTkLXmaFGqwq9tLKpXp-wXKqkN_no",
            authDomain: "lamp-88a25.firebaseapp.com",
            databaseURL: "https://lamp-88a25-default-rtdb.asia-southeast1.firebasedatabase.app",
            projectId: "lamp-88a25",
            storageBucket: "lamp-88a25.appspot.com"
        };
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.database();

        // Initialize Weeks
        const weekSel = document.getElementById('incomeWeek');
        for (let i = 1; i <= 100; i++) {
            let opt = document.createElement('option');
            opt.value = `Week-${i}`; opt.innerHTML = `·Ä°·Äï·Äê·Ä∫·ÄÖ·Äâ·Ä∫ (${i})`;
            weekSel.appendChild(opt);
        }

        auth.onAuthStateChanged(user => {
            if (user) {
                document.getElementById('loginPage').classList.add('hide');
                document.getElementById('mainApp').classList.remove('hide');
                document.getElementById('bottomNav').classList.remove('hide');
                document.getElementById('incomeDate').valueAsDate = new Date();
                document.getElementById('expDate').valueAsDate = new Date();
                updateBalance();
            }
        });

        async function login() {
            const e = document.getElementById('email').value;
            const p = document.getElementById('password').value;
            try { await auth.signInWithEmailAndPassword(e, p); } catch (err) { alert("Login Error!"); }
        }

        function logout() { if(confirm("·Äë·ÄΩ·ÄÄ·Ä∫·Äô·Äæ·Ä¨·Äú·Ä¨·Ä∏?")) auth.signOut().then(() => location.reload()); }

        function switchTab(id, el) {
            document.querySelectorAll('.page').forEach(p => p.classList.add('hide'));
            document.getElementById(id).classList.remove('hide');
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
            el.classList.add('active');
            if(id === 'historyTab') loadExpenseHistory();
        }

        function saveIncome() {
            const name = document.getElementById('donorName').value;
            const amt = parseFloat(document.getElementById('incomeAmount').value);
            const week = document.getElementById('incomeWeek').value;
            const date = document.getElementById('incomeDate').value;
            if(!name || !amt) return alert("·Ä°·ÄÅ·Äª·ÄÄ·Ä∫·Ä°·Äú·ÄÄ·Ä∫·Äñ·Äº·Ää·Ä∑·Ä∫·Äï·Ä´");
            
            db.ref('weekly_donations/' + week).push({ donorName: name, amount: amt, date: date }).then(() => {
                alert("·ÄÖ·Ä¨·Äõ·ÄÑ·Ä∫·Ä∏·Äû·ÄΩ·ÄÑ·Ä∫·Ä∏·Äï·Äº·ÄÆ·Ä∏·Äï·Ä´·Äï·Äº·ÄÆ");
                document.getElementById('donorName').value = '';
                document.getElementById('incomeAmount').value = '';
                updateBalance();
            });
        }

        function saveExpense() {
            const org = document.getElementById('expOrg').value;
            const act = document.getElementById('expActivity').value;
            const reg = document.getElementById('expRegion').value;
            const amt = parseFloat(document.getElementById('expAmount').value);
            const date = document.getElementById('expDate').value;
            const note = document.getElementById('expNote').value;

            if(!org || !amt) return alert("·Ä°·ÄÅ·Äª·ÄÄ·Ä∫·Ä°·Äú·ÄÄ·Ä∫·Äñ·Äº·Ää·Ä∑·Ä∫·Äï·Ä´");

            db.ref('expenses').push({ org, activity: act, region: reg, amount: amt, date, note }).then(() => {
                alert("·Äë·Ä±·Ä¨·ÄÄ·Ä∫·Äï·Ä≠·ÄØ·Ä∑·ÄÖ·Ä¨·Äõ·ÄÑ·Ä∫·Ä∏·Äû·ÄΩ·ÄÑ·Ä∫·Ä∏·Äï·Äº·ÄÆ·Ä∏·Äï·Ä´·Äï·Äº·ÄÆ");
                updateBalance();
                ['expOrg','expActivity','expRegion','expAmount','expNote'].forEach(id => document.getElementById(id).value = '');
            });
        }

        function updateBalance() {
            db.ref('weekly_donations').on('value', snap => {
                let totalInc = 0;
                snap.for